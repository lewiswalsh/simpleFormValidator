(function(b){b.fn.extend({myFormValidator:function(g){g=b.extend({toolTipWidth:200,toolTipClassName:"myFormValidatorTooltip",toolTipIdPrefix:"myFormValidatorTooltip-",toolTipOffsetTop:5,toolTipOffsetLeft:17},g);return this.each(function(){function k(){var a=0;b.each(e,function(m,d){var c=b("[name="+m+"]"),e=c.position(),c=c.width(),f={message:"",id:a,top:e.top,left:e.left+c};b.each(d,function(a,b){f.message+=b+"<br/>"});n.show(f);a++})}function p(a){e={};b(a).find("*").filter(":input[required]").each(function(){var a=
{};a.val=b(this).val();a.empty=c.isEmpty(a.val);a.name=b(this).attr("name");"undefined"!==typeof b(this).attr("data-datatype")?a.type=b(this).attr("data-datatype").toLowerCase():a.type="undefined"===typeof b(this).attr("type")?b(this).prop("tagName").toLowerCase():b(this).attr("type").toLowerCase();var d=b('label[for="'+b(this).attr("id")+'"]');0>=d.length?(d=b(this).parent(),"label"==d.get(0).tagName.toLowerCase()&&(a.label=d.html())):a.label=d.html();a.empty&&c.addError(a.name,c.capitaliseString(a.name)+
" must not be empty.");switch(a.type){case "email":h.validateEmail(a.val)||c.addError(a.name,"Email address is not good.");break;case "number":h.validateNumber(a.val)||c.addError(a.name,"This must be a number.");break;case "select":h.validateSelect(this)||c.addError(a.name,"Please select an option.")}console.log(a)})}var d=g,l=b(this),e={};b(l).attr("novalidate",!0);var f;f="<style type='text/css'> "+("."+d.toolTipClassName+" { text-align: left; font-size: 11px; width: "+d.toolTipWidth+"; padding: 10px; background: #555; position: absolute; color:#fff; }");
f+="."+d.toolTipClassName+":after { content: ''; position: absolute; top: "+(d.toolTipOffsetTop+3)+"px; right: 100%; margin-top: -8px; width: 0; height: 0; border-right: 8px solid #555; border-top: 8px solid transparent; border-bottom: 8px solid transparent; }";b(f+"</style>").appendTo("head");var n={stripLastBr:function(a){return a.substring(0,a.length-5)},show:function(a){var c=d.toolTipIdPrefix+a.id;b(document.body).append("<div id='"+c+"' class='"+d.toolTipClassName+"'>"+this.stripLastBr(a.message)+
"</div>");b("#"+c).parent().css({position:"relative"});b("#"+c).css({top:a.top+d.toolTipOffsetTop,left:a.left+d.toolTipOffsetLeft,position:"absolute"})}},c={isEmpty:function(a){return""==b.trim(a)?!0:!1},addError:function(a,b){a in e||(e[a]=[]);e[a].push(b)},capitaliseString:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},clearOldToolTips:function(){b("."+d.toolTipClassName).remove()}},h={validateEmail:function(a){return/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(a)?!0:!1},validateNumber:function(a){return isNaN(a)?
!1:!0},validateSelect:function(a){return"undefined"===typeof b("option:selected",a).attr("notme")?!0:!1}};b(window).on("resize",function(){c.clearOldToolTips();b.isEmptyObject(e)||k()});b(l).submit(function(a){a.preventDefault();c.clearOldToolTips();p(this);b.isEmptyObject(e)||(a.preventDefault(),k())})})}})})(jQuery);